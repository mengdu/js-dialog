/* eslint-disable */
/*!
 * Build version v0.1.0
 * Create by lanyueos@qq.com
 * Created at Tue Mar 26 2019 22:57:58 GMT+0800 (中国标准时间)
 */
!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):(e=e||self).Dialog=o()}(this,function(){"use strict";function i(e,o){for(var t=0;t<o.length;t++){var n=o[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(i){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{},o=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),o.forEach(function(e){var o,t,n;o=i,n=s[t=e],t in o?Object.defineProperty(o,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):o[t]=n})}return i}var l=document.documentElement,a=document.body;function d(e){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=document.createElement(e);for(var n in o)t[n]=o[n];return t}function r(e,o,t){e.addEventListener(o,t,!1)}var c=function(){function o(e){!function(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}(this,o),this.options=e=s({el:document.body,title:"Message",width:null,zIndex:null,className:null,supportHTML:!1,hasHeader:!0,hasCloseButton:!0,closeOnClickMask:!0,closeOnKeyEscape:!0,onClose:null,onOpen:null,cancel:null,confirm:null,cancelButtonText:"Cancel",confirmButtonText:"Confirm",maskBackground:null,containerOverflowHidden:!0},e),this.dom={warpper:d("DIV",{className:"js-dialog-wrapper"}),mask:d("DIV",{className:"js-dialog-mask"}),dialog:d("DIV",{className:"js-dialog"}),header:d("DIV",{className:"js-dialog-header"}),content:d("DIV",{className:"js-dialog-content"}),closeBtn:d("BUTTON",{className:"js-dialog--close"}),footer:d("DIV",{className:"js-dialog-footer"}),cancel:d("BUTTON",{className:"js-dialog--cancel"}),confirm:d("BUTTON",{className:"js-dialog--confirm"})},this.visible=!1,this.willVisible=!1,this.elOldStyle={},this.hadSetStyle=!1,e.hasHeader&&this.dom.dialog.appendChild(this.dom.header),this.dom.dialog.appendChild(this.dom.content),this.dom.warpper.appendChild(this.dom.mask),this.dom.warpper.appendChild(this.dom.dialog),this.dom.cancel.innerHTML=e.cancelButtonText,this.dom.confirm.innerHTML=e.confirmButtonText,"function"==typeof e.cancel&&this.dom.footer.appendChild(this.dom.cancel),"function"==typeof e.confirm&&this.dom.footer.appendChild(this.dom.confirm),this.dom.dialog.appendChild(this.dom.footer),this.dom.header.innerHTML="<span>"+e.title+"</span>",e.hasCloseButton&&(this.dom.closeBtn.innerHTML="<span>×</span>",this.dom.header.appendChild(this.dom.closeBtn)),e.className&&this.dom.warpper.classList.add(e.className),null!==e.zIndex&&(this.dom.warpper.style.zIndex=e.zIndex),e.width&&(this.dom.dialog.style.width=e.width),e.maskBackground&&(this.dom.mask.style.background=e.maskBackground),this.updateContent(e.content),this.listeners(),this.dom.warpper.style.display="none",e.el.appendChild(this.dom.warpper)}var e,t,n;return e=o,(t=[{key:"listeners",value:function(){var e=this;r(this.dom.dialog,"animationend",function(){e.willVisible?(e.visible=!0,"function"==typeof e.options.onOpen&&e.options.onOpen()):(e.dom.warpper.style.display="none",setTimeout(function(){e.hadSetStyle&&(e.options.el.style.overflow=""===e.elOldStyle.overflow?"":e.elOldStyle.overflow,e.options.el.style.marginRight=""===e.elOldStyle.marginRight?"":e.elOldStyle.marginRight,e.hadSetStyle=!1),e.dom.mask.classList.remove("js-dialog-mask-leave"),e.dom.dialog.classList.remove("js-dialog-enter"),e.dom.dialog.classList.remove("js-dialog-leave"),e.visible=!1}),"function"==typeof e.options.onClose&&e.options.onClose())}),r(this.dom.mask,"click",function(){e.options.closeOnClickMask&&e.hide()}),r(this.dom.closeBtn,"click",function(){e.hide()}),r(this.dom.cancel,"click",function(){"function"==typeof e.options.cancel&&e.options.cancel()}),r(this.dom.confirm,"click",function(){"function"==typeof e.options.confirm&&e.options.confirm()})}},{key:"show",value:function(){var e;this.visible||(this.dom.dialog.classList.add("js-dialog-enter"),this.dom.warpper.style.display="",this.options.containerOverflowHidden&&(e=this.options.el,a===e||l===e?(l.scrollHeight||a.scrollHeight)>l.clientHeight:e.scrollHeight>e.clientHeight)&&(this.elOldStyle={overflow:this.options.el.style.overflow,marginRight:this.options.el.style.marginRight},this.hadSetStyle=!0,this.options.el.style.overflow="hidden",this.options.el.style.marginRight=function(){var e=document.createElement("DIV");e.style.cssText="width: 100px; height: 100px;overflow: scroll;visibility: hidden;",document.body.appendChild(e);var o=e.offsetWidth,t=e.scrollWidth;return e.remove(),o-t}()+"px"),this.willVisible=!0)}},{key:"hide",value:function(){var e=this;this.visible&&(this.willVisible=!1,this.dom.dialog.classList.remove("js-dialog-leave"),this.dom.mask.classList.remove("js-dialog-mask-leave"),setTimeout(function(){e.dom.dialog.classList.add("js-dialog-leave"),e.dom.mask.classList.add("js-dialog-mask-leave")}))}},{key:"updateContent",value:function(e){this.options.supportHTML?this.dom.content.innerHTML=e:this.dom.content.innerText=e}},{key:"destroy",value:function(){this.dom.warpper.remove()}}])&&i(e.prototype,t),n&&i(e,n),o}();return c.$alert=function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(e){var o=new c(s({content:t,width:"300px",maskBackground:"rgba(255, 255, 255, 0.24)"},n,{closeOnClickMask:!1,hasCloseButton:!1,onClose:function(){o.destroy(),o=void 0},confirm:function(){o.hide(),e()}}));o.show()})},c.$confrim=function(n){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(e,o){var t=new c(s({content:n,width:"300px",maskBackground:"rgba(255, 255, 255, 0.24)"},i,{closeOnClickMask:!1,hasCloseButton:!1,onClose:function(){t.destroy(),t=void 0},confirm:function(){t.hide(),e("confirm")},cancel:function(){t.hide(),o(new Error("cancel"))}}));t.show()})},c});
